From: Antonio Terceiro <terceiro@debian.org>
Date: Thu, 3 Mar 2016 16:30:17 -0300
Subject: Be careful with that bundler

---
 railties/lib/rails/generators/app_base.rb | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/railties/lib/rails/generators/app_base.rb b/railties/lib/rails/generators/app_base.rb
index 4ff30a5..c150dc3 100644
--- a/railties/lib/rails/generators/app_base.rb
+++ b/railties/lib/rails/generators/app_base.rb
@@ -325,11 +325,9 @@ module Rails
         # We unset temporary bundler variables to load proper bundler and Gemfile.
         #
         # Thanks to James Tucker for the Gem tricks involved in this call.
-        _bundle_command = Gem.bin_path('bundler', 'bundle')
-
         require 'bundler'
         Bundler.with_clean_env do
-          output = `"#{Gem.ruby}" "#{_bundle_command}" #{command}`
+          output = `"#{Gem.ruby}" "/usr/bin/bundle" #{command}`
           print output unless options[:quiet]
         end
       end
@@ -343,7 +341,7 @@ module Rails
       end
 
       def run_bundle
-        bundle_command('install') if bundle_install?
+        bundle_command('install --local') if bundle_install?
       end
 
       def generate_spring_binstubs
